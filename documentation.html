<!DOCTYPE html>
<html>
<head>
    <meta http-equiv='content-type' content='text/html;charset=utf-8'>
    <title>Jocco Doccumentation</title>
    <link rel=stylesheet href="http://jashkenas.github.com/docco/resources/docco.css">
	<link href="google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="google-code-prettify/prettify.js"></script>
</head>
<body onload="prettyPrint()">
<div id=container>
    <div id=background></div>
        <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>DocumentationModel</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModel_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import java.util.Collection;
import java.util.LinkedList;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModel_section_2">&#182;</a>
	              			</div>
							<p>/**
* @author p.bousquie
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public class DocumentationModel {

    private transient Collection<FileModel> listOfFileModel = new LinkedList<FileModel>();

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModel_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return a collection of fileModel representing the files documented
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public Collection<FileModel> getListOfFileModel() {
        return listOfFileModel;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModel_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param listOfFileModel
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public void setListOfFileModels(final Collection<FileModel> listOfFileModel) {
        this.listOfFileModel = listOfFileModel;

    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModel_section_5">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param file
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public void add(final FileModel file) {
        listOfFileModel.add(file);

    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModel_section_6">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param file
 * @return true if the DocumentationModel contain a file.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public boolean contains(final FileModel file) {
        return listOfFileModel.contains(file);
    }

}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>FileModel</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import java.util.Collection;
import java.util.LinkedList;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_2">&#182;</a>
	              			</div>
							<p>/**
* @author p.bousquie
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public class FileModel {

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * Files without name shall have a default name
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public static final String DEFAULT_NAME = ""; //$NON-NLS-1$
</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * Files without extensions shall have a default extension
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public static final String DEFAULT_EXTENSION = ""; //$NON-NLS-1$

    private String name = DEFAULT_NAME;
    private String extension = DEFAULT_EXTENSION;
    private Collection<Section> listOfSections = new LinkedList<Section>();

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_5">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param name
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public void setName(final String name) {
        this.name = name;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_6">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return the name of the parsed file or a default blank name
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public String getName() {
        return name;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_7">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param extension
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public void setExtension(final String extension) {
        this.extension = extension;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_8">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return the extension of the parsed file or a default blank extension
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public String getExtension() {
        return extension;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_9">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param listOfSections
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public void setListOfSections(final Collection<Section> listOfSections) {
        this.listOfSections = listOfSections;

    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModel_section_10">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return a collection of section of the parsed file
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public Collection<Section> getListOfSections() {
        return listOfSections;
    }

}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>Jocco</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Jocco_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;
import java.io.StringWriter;
import java.io.Writer;
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.tautua.markdownpapers.Markdown;
import org.tautua.markdownpapers.parser.ParseException;

import freemarker.template.TemplateException;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Jocco_section_2">&#182;</a>
	              			</div>
							<p>/**
* @author Krilivye-Homestation This is the Jocco main class.
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public class Jocco {

    private transient List<File> files;
    private transient List<Section> listOfSections;
    private final transient Markdown markdown = new Markdown();

    private static final Logger LOGGER = LoggerFactory.getLogger(Jocco.class);

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Jocco_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * For Test interface.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public Jocco() {
        files = new ArrayList<File>();
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Jocco_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param dirOrFile
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public Jocco(final String dirOrFile) {
        validate(dirOrFile);
    }

    // Valide le constructeur en vérifiant que l'argument est bien un répertoire
    // ou un fichier.
    private void validate(final String dirOrFile) {

        final File file = new File(dirOrFile);
        if (file.exists()) {
            files = new LinkedList<File>();
            addFiles(files, file);
        } else {
            throw new IllegalArgumentException(Messages.getString("Program.main.illegal")); //$NON-NLS-1$
        }
    }

    // Méthode qui construit la liste des fichier en garantissant qu'il n'y ait
    // aucun null
    private void addFiles(final List<File> listOffiles, final File dir) {
        if (dir != null) {
            if (dir.isDirectory()) {
                for (final File file : dir.listFiles()) {
                    addFiles(listOffiles, file);
                }
            } else {
                listOffiles.add(dir);
            }
        }

    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Jocco_section_5">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return a list of files
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public List<File> getFiles() {
        return files;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Jocco_section_6">&#182;</a>
	              			</div>
							<pre><code>/**
 * This setter does not permit null value
 * @param fileOrDir
 * a file or a dir name
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public void setFiles(final String fileOrDir) {
        if (fileOrDir == null) {
            throw new IllegalArgumentException(Messages.getString("Program.main.null")); //$NON-NLS-1$
        }
        validate(fileOrDir);

    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Jocco_section_7">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return true if the process's have been correctly executed, false
 * otherwise.
 * @throws IOException
 * @throws TemplateException
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public boolean generateDoc() throws IOException, TemplateException {
        final Writer fileout = new FileWriter(new File("documentation.html")); //$NON-NLS-1$
        final Template template = new Template();
        final DocumentationModel docmodel = new DocumentationModel();
        for (final File file : files) {
            final FileModel model = new FileModel();
            final List<Section> sections = parseFile(file);
            markDownHiglight(sections);
            model.setListOfSections(sections);
            model.setName(file.getName().split("\\.")[0]);
            model.setExtension(file.getName().split("\\.")[1]);

            docmodel.add(model);

        }
        fileout.write(template.fillTemplate(docmodel));
        fileout.close();

        return true;
    }

    private void markDownHiglight(final List<Section> sections) {

        for (final Section section : sections) {
            transformDoc(section);
            section.setCodeHTML("<pre><code class='prettyprint'>" + section.getCode() + "</code></pre>"); //$NON-NLS-1$ //$NON-NLS-2$

        }

    }

    private void transformDoc(final Section section) {
        final Writer out = new StringWriter();
        final Reader input = new StringReader(section.getDoc());
        try {
            markdown.transform(input, out);
            section.setDocHTML(out.toString());
        } catch (final ParseException e) {
            LOGGER.error(e.getMessage());
        }
    }

    private List<Section> parseFile(final File file) throws FileNotFoundException, IOException {
        listOfSections = new LinkedList<Section>();
        final BufferedReader input = new BufferedReader(new FileReader(file));
        boolean hascode = false;

        final StringBuilder docsText = new StringBuilder();
        final StringBuilder codeText = new StringBuilder();

        String line;
        while (null != (line = input.readLine())) {
</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Jocco_section_8">&#182;</a>
	              			</div>
							<pre><code>        if (line.contains(&quot;*&quot;) || line.contains(&quot;////&quot;)) { //$NON-NLS-1$ //$NON-NLS-2$
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (hascode) {
                    save(docsText, codeText);
                    hascode = false;
                    docsText.setLength(0);
                    codeText.setLength(0);
                }
                docsText.append(line).append("\n"); //$NON-NLS-1$
            } else {
                hascode = true;
                codeText.append(line).append("\n"); //$NON-NLS-1$
            }
        }
        save(docsText, codeText);
        return listOfSections;
    }

    private void save(final StringBuilder docsText, final StringBuilder codeText) {
        listOfSections.add(new Section(docsText.toString(), codeText.toString()));
    }
}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>Messages</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Messages_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import java.util.MissingResourceException;
import java.util.ResourceBundle;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Messages_section_2">&#182;</a>
	              			</div>
							<p>/**
* The generated message classes
* @author Krilivye-Homestation
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public final class Messages {

    private static final String BUNDLE_NAME = "net.krilivye.jocco.Messages"; //$NON-NLS-1$

    private static final ResourceBundle RESOURCE_BUNDLE = ResourceBundle.getBundle(BUNDLE_NAME);

    private Messages() {
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Messages_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param key
 * a key string present in messages.properties
 * @return the corresponding value
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public static String getString(final String key) {
        try {
            return RESOURCE_BUNDLE.getString(key);
        } catch (final MissingResourceException e) {
            return '!' + key + '!';
        }
    }
}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>Program</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Program_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Program_section_2">&#182;</a>
	              			</div>
							<p>/**
* This is the programe launcher.
* @author Krilivye-Homestation
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public final class Program {

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Program_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * Inner for testing purpose.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public static final Jocco JOCCO = new Jocco();

    private static final Logger LOGGER = LoggerFactory.getLogger(Program.class);

    private Program() {
        // No one can instantiate this class.
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Program_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param args
 * command line arguments should be a file name or a directory
 * @throws IllegalArgumentException
 * if the command line arguments are not legal.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public static void main(final String[] args) throws IllegalArgumentException {
        if (args == null || args.length == 0) {
            throw new IllegalArgumentException(Messages.getString("Program.main.null")); //$NON-NLS-1$
        }
        if (args.length > 1) {
            throw new IllegalArgumentException(Messages.getString("Program.main.tooMuchArgument")); //$NON-NLS-1$			
        }
        try {
            JOCCO.setFiles(args[0]);
            JOCCO.generateDoc();
        } catch (final Exception e) {
            LOGGER.error(e.getMessage());
            System.exit(1);
        }

    }
}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>Section</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_2">&#182;</a>
	              			</div>
							<p>/**
* A Jocco section consiste of a documentation comment and its relative code.
* After parsing the code is converted to HTML
*
* @author Krilivye-Homestation
*
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public class Section {

    private final transient String doc;
    private final transient String code;
    private String docHTML;
    private String codeHTML;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param docText the comment 
 * @param docCode the code
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public Section(final String docText, final String docCode) {
        doc = docText;
        code = docCode;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return the original file comment
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public final String getDoc() {
        return doc;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_5">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param string the formated documentation
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public final void setDocHTML(final String string) {
        docHTML = string;

    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_6">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return the original code
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public final String getCode() {
        return code;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_7">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param string the formated code.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public final void setCodeHTML(final String string) {
        codeHTML = string;

    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_8">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return the comment converted to html markup
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public final String getDocHTML() {
        return docHTML;
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Section_section_9">&#182;</a>
	              			</div>
							<pre><code>/**
 * @return the code converted to html markup
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public final String getCodeHTML() {
        return codeHTML;
    }

}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>Template</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Template_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import java.io.File;
import java.io.IOException;
import java.io.StringWriter;
import java.io.Writer;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import freemarker.template.Configuration;
import freemarker.template.DefaultObjectWrapper;
import freemarker.template.SimpleHash;
import freemarker.template.TemplateException;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Template_section_2">&#182;</a>
	              			</div>
							<p>/**
* @author Krilivye-Homestation
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public class Template {

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Template_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * The configuration directory of the template library.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    private final transient Configuration cfg = new Configuration();
</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Template_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * The root element of the documentation template.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    private final transient SimpleHash root = new SimpleHash();

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Template_section_5">&#182;</a>
	              			</div>
							<pre><code>/**
 * The template constructor load the default configuration directory.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public Template() {

        // Specify the data source where the template files come from.
        // Here I set a file directory for it:
        try {
            cfg.setDirectoryForTemplateLoading(new File("src/main/resources/")); //$NON-NLS-1$
        } catch (final IOException e) {
            final Logger logger = LoggerFactory.getLogger(Template.class);
            logger.error(e.getLocalizedMessage());
        }
        // Specify how templates will see the data-model. This is an advanced
        // topic...
        // but just use this:
        cfg.setObjectWrapper(new DefaultObjectWrapper());
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Template_section_6">&#182;</a>
	              			</div>
							<pre><code>/**
 * @param model
 * a documentation model that will fill the template.
 * @return the filled Template
 * @throws IOException
 * on template file may occure
 * @throws TemplateException
 * if the template is not correctly made.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    public final String fillTemplate(final DocumentationModel model) throws TemplateException, IOException {
        final freemarker.template.Template temp = cfg.getTemplate("jocco.ftl"); //$NON-NLS-1$

        // expose a "simple" java objects:
        root.put("theList", model.getListOfFileModel()); //$NON-NLS-1$
        final Writer out = new StringWriter();
        temp.process(root, out);
        return out.toString();

    }

}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>jocco</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#jocco_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'><!DOCTYPE html>
<html>
<head>
    <meta http-equiv='content-type' content='text/html;charset=utf-8'>
    <title>Jocco Doccumentation</title>
    <link rel=stylesheet href="http://jashkenas.github.com/docco/resources/docco.css">
	<link href="google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="google-code-prettify/prettify.js"></script>
</head>
<body onload="prettyPrint()">
<div id=container>
    <div id=background></div>
    <#list theList as alist>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>${alist.name}</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
    		<#list alist.listOfSections as sections>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#${alist.name}_section_${sections_index + 1}">&#182;</a>
	              			</div>
							${sections.docHTML}
						</td>
						<td class="code">
							${sections.codeHTML}						
						</td>
				</tr>
			</#list>
    </tbody>
    </table>
    </#list>
</div>
</body>
</html>
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>Messages</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#Messages_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>Program.main.null=You must provide a first a file or directory
Program.main.illegal=You must provide a valid source file
Program.main.tooMuchArgument=You can only provide a dir or file name
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>DocumentationModelTest</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModelTest_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import java.util.Collections;

import junit.framework.Assert;


import org.junit.Before;
import org.junit.Test;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModelTest_section_2">&#182;</a>
	              			</div>
							<p>/**
* The documentation model consist of a list of file model. You can only add
* file to the model.
* 
* @author Krilivye-Homestation
* 
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public class DocumentationModelTest {

    private transient DocumentationModel docmodel;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModelTest_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * Prepare the model to test
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Before
    public void setUp() {
	docmodel = new DocumentationModel();
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModelTest_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test that the documentation model contains a default empty list of file
 * model
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testListOfFileModel() {
	Assert.assertEquals(Collections.emptyList(),
	        docmodel.getListOfFileModel());
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#DocumentationModelTest_section_5">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test that we can add FileModel to the list of file model
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testAddFileModel() {
	final FileModel file = new FileModel();
	docmodel.add(file);
	Assert.assertTrue(docmodel.contains(file));
    }
}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>FileModelTest</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import java.util.Collection;
import java.util.Collections;
import java.util.LinkedList;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_2">&#182;</a>
	              			</div>
							<p>/**
* The file model should provide the name of the file, the extension and a list
* of sections containing both code and comment.
* 
* @author Krilivye-Homestation
* 
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public class FileModelTest {

    private transient FileModel filemodel;
    private transient String fileName;
    private transient String extension;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * Initialize the filemodel class for testing purpose.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Before
    public void setUp() {
	filemodel = new FileModel();
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test that we can set and get the name of the file
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testSetName() {
	fileName = "FileName"; //$NON-NLS-1$
	// Act
	filemodel.setName(fileName);
	// Assert
	Assert.assertEquals(fileName, filemodel.getName());
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_5">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test that the fileModel has an extension
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testSetExtension() {
	extension = "js"; //$NON-NLS-1$
	// Act
	filemodel.setExtension(extension);
	// Assert
	Assert.assertEquals(extension, filemodel.getExtension());
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_6">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test that the fileModel has a collection of sections.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testSetSections() {
	// Arrange
	final Collection<Section> col = new LinkedList<Section>();
	// Act
	filemodel.setListOfSections(col);
	// Assert
	Assert.assertEquals(col, filemodel.getListOfSections());
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_7">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test that fileModel assure that it has a default name
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testGetName() {
	// Arrange
	final String defaultname = FileModel.DEFAULT_NAME;

	// Act
	fileName = filemodel.getName();

	// Assert
	Assert.assertEquals(defaultname, fileName);
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_8">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test that {@link FileModel} assure that it has a default extension
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testGetExtension() {
	// Arrange
	final String defaultExtension = FileModel.DEFAULT_EXTENSION;

	// Act
	extension = filemodel.getExtension();

	// Assert
	Assert.assertEquals(defaultExtension, extension);
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#FileModelTest_section_9">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test that {@link FileModel} assure that it has a default empty collection
 * of sections
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testGetSections() {
	// Arrange
	final Collection<Section> emptycol = Collections.emptyList();

	// Act
	final Collection<Section> col = filemodel.getListOfSections();

	// Assert
	Assert.assertEquals(emptycol, col);
    }

}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>JoccoTest</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#JoccoTest_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import static org.junit.Assert.fail;

import java.io.File;
import java.net.URL;

import junit.framework.Assert;

import org.junit.Before;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#JoccoTest_section_2">&#182;</a>
	              			</div>
							<p>/**
* This class test the Jocco Test class.
* @author Krilivye-Homestation
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>
public class JoccoTest {

    private transient Jocco jocco;

    private static final Logger LOGGER = LoggerFactory.getLogger(JoccoTest.class);

    private transient URL testFile;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#JoccoTest_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * 
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Before
    public void setUp() {
        jocco = new Jocco();
        testFile = getClass().getResource("test.html");
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#JoccoTest_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * 
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testSetFilesWithNull() {
        try {
            jocco.setFiles(null);
            fail("Expected IllegalArgumentException when argument is null"); //$NON-NLS-1$
        } catch (final IllegalArgumentException expected) {
            Assert.assertEquals(Messages.getString("Program.main.null"), //$NON-NLS-1$
                    expected.getMessage());
        }
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#JoccoTest_section_5">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test the setter with correct argument
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testSetFilesWithAValidFileName() {

        jocco.setFiles(testFile.getPath()); //$NON-NLS-1$
        Assert.assertTrue(jocco.getFiles().contains(new File(testFile.getPath())));

    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#JoccoTest_section_6">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test si l'appel du programme avec un non de fichier valable se termine
 * bien
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testSetFilesWithAValidDirectory() {
        try {
            jocco.setFiles("src"); //$NON-NLS-1$
            Assert.assertTrue(true);
        } catch (final IllegalArgumentException e) {
            fail("Expected Argument to be valid"); //$NON-NLS-1$
        }
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#JoccoTest_section_7">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test the documentation generation
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testGenerateDoc() {

        jocco.setFiles(testFile.getPath()); //$NON-NLS-1$

        try {
            final boolean execute = jocco.generateDoc();
            Assert.assertTrue(execute);
        } catch (final Exception e) {
            // Hardware IO may Occur
            LOGGER.error(e.toString());
            fail();
        }

    }
}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>ProgramTest</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#ProgramTest_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>package net.krilivye.jocco;

import static org.junit.Assert.fail;
import junit.framework.Assert;

import org.junit.Test;

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#ProgramTest_section_2">&#182;</a>
	              			</div>
							<p>/**
* Test de la classe program.
* 
* @author Krilivye-Homestation
*/</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>public class ProgramTest {

    private static final String[] TEST = new String[] {
            "NonValid", "encore moins" }; //$NON-NLS-1$ //$NON-NLS-2$

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#ProgramTest_section_3">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test si l'appel du programme sans argument est valable.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testMainWithNull() {
        try {
            Program.main(new String[] {});
            fail("Expected IllegalArgumentException when argument is empty"); //$NON-NLS-1$
        } catch (final IllegalArgumentException expected) {
            Assert.assertEquals(Messages.getString("Program.main.null"), //$NON-NLS-1$
                    expected.getMessage());
        }
    }

</code></pre>						
						</td>
				</tr>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#ProgramTest_section_4">&#182;</a>
	              			</div>
							<pre><code>/**
 * Test si l'appel du programme avec trops d'arguments est valable.
 */
</code></pre>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>    @Test
    public void testMainWithTooMuchArguments() {
        try {
            Program.main(TEST);
            fail("Expected IllegalArgumentException when argument is not valid "); //$NON-NLS-1$
        } catch (final IllegalArgumentException e) {
            Assert.assertEquals(
                    Messages.getString("Program.main.tooMuchArgument"), //$NON-NLS-1$
                    e.getMessage());
        }
    }

}
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
    <table cellspacing=0 cellpadding=0>
    <thead>
      <tr>
        <th class=docs><h1>test</h1></th>
        <th class=code></th>
      </tr>
    </thead>
    <tbody>
				<tr>
						<td class="docs">
							<div class="pilwrap">
	                			<a class="pilcrow" href="#test_section_1">&#182;</a>
	              			</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>//Test 
</code></pre>						
						</td>
				</tr>
    </tbody>
    </table>
</div>
</body>
</html>